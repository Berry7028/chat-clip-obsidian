# インジェクションディレクトリ

このディレクトリには、Webページに注入されるスクリプトとUIコンポーネントが含まれています。

## 概要

- **目的**: チャットページへの機能注入とUI拡張
- **責任**: DOM操作、イベント処理、UI要素の管理
- **実行環境**: ブラウザのコンテンツスクリプト環境

## ディレクトリ構造

```
inject/
├── service.js      # インジェクションサービスのメインロジック
├── ui.js          # UI要素の管理と操作
└── README.md      # このファイル
```

## ファイル説明

### service.js
- インジェクション処理のメインエントリーポイント
- DOM要素の監視と初期化
- イベントリスナーの設定
- 他のモジュールとの連携

### ui.js
- UI要素の作成と管理
- ボタンやオーバーレイの制御
- スタイルの適用
- ユーザーインタラクションの処理

## インジェクション処理の流れ

1. **初期化**: ページ読み込み完了後の初期化処理
2. **要素検出**: チャット要素の存在確認
3. **UI注入**: 必要なUI要素の追加
4. **イベント設定**: クリックやキー入力の監視
5. **状態管理**: インジェクション状態の管理

## セキュリティ考慮事項

- CSP（Content Security Policy）の遵守
- XSS攻撃の防止
- 適切なサニタイゼーション
- 権限の最小化

## パフォーマンス最適化

- 不要なDOM操作の最小化
- イベントリスナーの適切な管理
- メモリリークの防止
- 効率的なセレクターの使用

## デバッグ

```javascript
// デバッグモードの有効化
window.DEBUG_MODE = true;

// ログ出力
console.log('[ChatClip] インジェクション完了');
```

## 注意事項

- ページの既存機能を妨害しないよう注意してください
- 異なるサイトでの互換性を考慮してください
- エラーハンドリングを適切に実装してください
