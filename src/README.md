# src

このディレクトリは、Chat Clip Obsidian拡張機能のメインソースコードを含んでいます。

## 概要

Chat Clip Obsidianは、ChatGPTなどのAIチャットサービスとの会話をObsidianに保存するためのブラウザ拡張機能です。

## ディレクトリ構造

### chromium/
Chrome拡張機能のメインコンポーネント
- **background/**: バックグラウンドスクリプト（拡張機能のライフサイクル管理）
- **popup/**: ポップアップUIとコンポーネント（ユーザーインターフェース）
- **options/**: オプションページ（設定画面）

### contentScripts/
ウェブページに注入されるコンテンツスクリプト
- **js/**: JavaScriptファイル（メインロジック）
  - **providers/**: 各チャットサービスのプロバイダー
  - **inject/**: ページ注入処理
- **css/**: スタイルシート（UIスタイル）

### services/
外部サービスとの連携
- **system/**: システムサービス（ファイルシステム、Obsidian連携）

### utils/
ユーティリティ関数とヘルパー
- **browser/**: ブラウザ固有の機能（Chrome API、Obsidian API）
- **data/**: データ処理とエラーハンドリング
- **notifications/**: 通知システム
- **markdown.js**: Markdown処理ユーティリティ

### workers/
Web Workers（バックグラウンド処理）
- **textSplitter.js**: テキスト分割処理

### __tests__/
テストファイル
- ユニットテスト、統合テスト、E2Eテスト

## アーキテクチャ

```
src/
├── chromium/           # ブラウザ拡張機能
│   ├── background/     # バックグラウンド処理
│   ├── popup/         # ユーザーインターフェース
│   └── options/       # 設定画面
├── contentScripts/     # ページ注入スクリプト
│   ├── js/           # メインロジック
│   └── css/          # スタイル
├── services/          # 外部サービス連携
├── utils/             # ユーティリティ
├── workers/           # バックグラウンド処理
└── __tests__/         # テスト
```

## 開発ガイドライン

- **責任の分離**: 各ディレクトリは特定の責任を持つ
- **依存関係の最小化**: モジュール間の依存関係を最小限に保つ
- **エラーハンドリング**: 適切なエラーハンドリングを実装する
- **パフォーマンス**: 効率的な設計を行う
- **テスト**: 各機能に対応するテストを作成する
- **ドキュメント**: 各ディレクトリにREADME.mdを作成する

## ビルドとデプロイ

```bash
# 開発ビルド
npm run build:dev

# 本番ビルド
npm run build:prod

# テスト実行
npm test
```

## 注意事項

- ブラウザのセキュリティポリシーを遵守してください
- ユーザーのプライバシーを保護してください
- 適切なエラーハンドリングを実装してください
